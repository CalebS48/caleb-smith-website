<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caleb Smith - Engineering Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #d1d5db;
        }

        #hero-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .glass-effect {
            background: rgba(17, 24, 39, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .accent-color {
            color: #60a5fa;
        }

        .accent-bg {
            background-color: #3b82f6;
        }
        
        .accent-border {
            border-color: #3b82f6;
        }
        
        .section-heading {
            display: flex;
            align-items: center;
            font-size: 1.75rem; /* text-2xl */
            font-weight: 700;
            color: #f9fafb;
            margin-bottom: 2rem;
        }

        .section-heading::after {
            content: '';
            flex-grow: 1;
            height: 1px;
            background-color: #374151;
            margin-left: 1rem;
        }
        
        .scroll-animation {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .scroll-animation.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .tech-tag {
            background-color: #1e40af;
            color: #93c5fd;
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: 500;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(17, 24, 39, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
        }
        .modal-overlay.visible {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background-color: #1f2937; /* gray-800 */
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        .modal-overlay.visible .modal-content {
            transform: scale(1);
        }
        #modal-media-container {
            position: relative;
        }
        #modal-media-container canvas {
            display: block;
            width: 100%;
            height: 100%;
            border-radius: 0.5rem;
        }
        .three-d-prompt {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            pointer-events: none;
        }
    </style>
</head>

<body class="antialiased leading-relaxed">
    <!-- Header -->
    <header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 glass-effect shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold accent-color nav-logo">CS</a>
            <div id="desktop-nav" class="hidden md:flex items-center space-x-8">
                <a href="#about" class="nav-link hover:accent-color transition-colors duration-300">About</a>
                <a href="#gallery" class="nav-link hover:accent-color transition-colors duration-300">Gallery</a>
                <a href="#experience" class="nav-link hover:accent-color transition-colors duration-300">Experience</a>
                <a href="#resume" class="nav-link hover:accent-color transition-colors duration-300">Resume</a>
                <a href="#contact" class="nav-link hover:accent-color transition-colors duration-300">Contact</a>
            </div>
            <button id="mobile-menu-btn" class="md:hidden focus:outline-none">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#about" class="nav-link block py-2 hover:accent-color">About</a>
            <a href="#gallery" class="nav-link block py-2 hover:accent-color">Gallery</a>
            <a href="#experience" class="nav-link block py-2 hover:accent-color">Experience</a>
            <a href="#resume" class="nav-link block py-2 hover:accent-color">Resume</a>
            <a href="#contact" class="nav-link block py-2 hover:accent-color">Contact</a>
        </div>
    </header>

    <main class="container mx-auto px-6 lg:px-20 pt-24 md:pt-32">

        <!-- Hero Section -->
        <section id="hero" class="min-h-[70vh] flex flex-col justify-center scroll-animation relative">
            <canvas id="hero-canvas"></canvas>
            <div class="hero-content">
                <p class="text-lg accent-color mb-4">Hi, my name is</p>
                <h1 class="text-4xl md:text-7xl font-bold text-gray-50">Caleb Smith.</h1>
                <h2 class="text-4xl md:text-7xl font-bold text-gray-400 mt-2">I build things for the real world.</h2>
                <p class="mt-6 max-w-xl text-gray-400">
                    I'm a Mechanical Engineering student at the University of Central Florida (UCF), with an expected graduation in Fall 2027. As the Social Media Manager for our ASME chapter, I'm passionate about both technical innovation and community engagement.
                </p>
                <div class="mt-8">
                    <a href="#gallery" class="accent-bg text-white font-bold py-3 px-8 rounded-md hover:bg-opacity-90 transition-all duration-300 text-lg">
                        View My Work
                    </a>
                </div>
            </div>
        </section>
        
        <!-- About Section -->
        <section id="about" class="py-24 scroll-animation">
            <h2 class="section-heading">About Me</h2>
            <div class="grid grid-cols-1 md:grid-cols-5 gap-10">
                <div class="md:col-span-3 text-gray-400 space-y-4">
                    <p>
                        Hello! I'm Caleb, a Mechanical Engineering student at the University of Central Florida. My journey into the field started with a childhood fascination for how things work, which has evolved into a dedicated pursuit of building elegant and efficient mechanical systems. I'm also actively involved in the engineering community as the Social Media Manager for our university's ASME chapter.
                    </p>
                    <p>
                        At UCF, I've had the opportunity to work on diverse projects, from autonomous drone systems to developing sustainable energy solutions. These experiences have not only honed my technical abilities but also taught me the importance of collaboration and perseverance.
                    </p>
                    <p>Here are a few technologies I've been working with recently:</p>
                    <ul class="grid grid-cols-2 gap-2 mt-4">
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>SolidWorks</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>OnShape</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>AutoCAD</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>MATLAB</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>Python</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>C</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>Soldering</li>
                        <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>Graphic Design</li>
                         <li class="flex items-center"><i data-lucide="chevron-right" class="w-4 h-4 accent-color mr-2"></i>Photoshop</li>
                    </ul>
                </div>
                <div class="md:col-span-2 flex justify-center items-start">
                    <div class="w-64 h-64 relative group">
                        <div class="absolute inset-0 bg-gray-700 rounded-md z-0 transform transition-transform duration-300 group-hover:translate-x-2 group-hover:translate-y-2"></div>
                        <div class="absolute inset-0 border-2 accent-border rounded-md z-10 transform transition-transform duration-300 group-hover:-translate-x-2 group-hover:-translate-y-2"></div>
                        <img src="https://res.cloudinary.com/dffo9kuhp/image/upload/v1760133557/IMG_7720_bemqsa.jpg" alt="Caleb Smith" class="absolute inset-0 w-full h-full object-cover rounded-md z-0 transition-all duration-300" style="object-position: top;">
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery" class="py-24 scroll-animation">
            <h2 class="section-heading">Project Gallery</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Project 1 -->
                <div class="glass-effect rounded-lg p-6 flex flex-col justify-between hover:-translate-y-2 transition-transform duration-300 cursor-pointer project-card" data-project-id="orange-race">
                    <div>
                        <div class="flex justify-between items-center mb-4">
                            <i data-lucide="folder-git-2" class="w-10 h-10 accent-color"></i>
                            <span class="text-xs text-gray-500">UCF</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-50 mb-2">Great Navel Orange Race</h3>
                        <p class="text-gray-400 text-sm">
                            Designed and fabricated a remote-controlled boat, focusing on hull design in SolidWorks and performing fluid analysis to ensure stability and buoyancy.
                        </p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <span class="tech-tag">3D Model</span>
                        <span class="tech-tag">SolidWorks</span>
                        <span class="tech-tag">Fluid Dynamics</span>
                        <span class="tech-tag">Gyroscopes</span>
                    </div>
                </div>
                <!-- Project 2 -->
                <div class="glass-effect rounded-lg p-6 flex flex-col justify-between hover:-translate-y-2 transition-transform duration-300 cursor-pointer project-card" data-project-id="robotic-hand">
                    <div>
                         <div class="flex justify-between items-center mb-4">
                            <i data-lucide="folder-git-2" class="w-10 h-10 accent-color"></i>
                            <span class="text-xs text-gray-500">ASME</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-50 mb-2">Robotic Hand Competition</h3>
                        <p class="text-gray-400 text-sm">
                            Engineered a fully operational robotic hand using potentiometers, fishing line, and custom-designed 3D printed components.
                        </p>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-6">
                        <span class="tech-tag">3D Model</span>
                        <span class="tech-tag">SolidWorks</span>
                        <span class="tech-tag">Mechatronics</span>
                        <span class="tech-tag">3D Printing</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Experience Section -->
        <section id="experience" class="py-24 scroll-animation">
            <h2 class="section-heading">Work Experience</h2>
            <div class="relative border-l-2 border-gray-700 ml-4">
                 <!-- Experience Item 1 -->
                <div class="mb-10 ml-8">
                    <span class="absolute flex items-center justify-center w-8 h-8 bg-gray-800 rounded-full -left-4 ring-4 ring-gray-700">
                        <i data-lucide="volume-2" class="w-5 h-5 accent-color"></i>
                    </span>
                    <h3 class="text-xl font-semibold text-gray-50">LEAD Event Production Technician</h3>
                    <p class="text-md font-medium accent-color">UCF Student Union</p>
                    <time class="block mb-2 text-sm font-normal leading-none text-gray-500">March 2024 - Present</time>
                    <ul class="list-disc list-inside text-gray-400 space-y-1">
                        <li>Engineer and execute technical setups for live events, applying principles of systems and resource management.</li>
                        <li>Train team members on diverse equipment including audio consoles, wireless cameras, and DMX lighting.</li>
                        <li>Design and implement efficient workflows for equipment setup and strike to improve operational efficiency.</li>
                    </ul>
                </div>
                <!-- Experience Item 2 -->
                <div class="mb-10 ml-8">
                    <span class="absolute flex items-center justify-center w-8 h-8 bg-gray-800 rounded-full -left-4 ring-4 ring-gray-700">
                        <i data-lucide="users" class="w-5 h-5 accent-color"></i>
                    </span>
                    <h3 class="text-xl font-semibold text-gray-50">Social Media Manager</h3>
                    <p class="text-md font-medium accent-color">ASME at UCF</p>
                    <time class="block mb-2 text-sm font-normal leading-none text-gray-500">May 2025 - Present</time>
                     <ul class="list-disc list-inside text-gray-400 space-y-1">
                        <li>Spearhead marketing and communications initiatives for the university's ASME chapter.</li>
                        <li>Design promotional content including digital flyers, videos, and posts.</li>
                        <li>Collaborate with the executive board to plan and execute club events.</li>
                    </ul>
                </div>
                 <!-- Experience Item 3 -->
                <div class="mb-10 ml-8">
                    <span class="absolute flex items-center justify-center w-8 h-8 bg-gray-800 rounded-full -left-4 ring-4 ring-gray-700">
                        <i data-lucide="theater" class="w-5 h-5 accent-color"></i>
                    </span>
                    <h3 class="text-xl font-semibold text-gray-50">Stage Manager</h3>
                    <p class="text-md font-medium accent-color">Studio@620</p>
                    <time class="block mb-2 text-sm font-normal leading-none text-gray-500">March 2022 - July 2022</time>
                     <ul class="list-disc list-inside text-gray-400 space-y-1">
                        <li>Managed and troubleshot technical show operations, including audio and lighting systems.</li>
                        <li>Engineered and controlled dynamic lighting systems to meet artistic requirements.</li>
                        <li>Directed a crew of 4 stagehands, coordinating time-sensitive scene transitions.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Certifications & Awards Section -->
        <section id="awards" class="py-24 scroll-animation">
            <h2 class="section-heading">Certifications</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="glass-effect rounded-lg p-6 flex items-start gap-4">
                    <div class="flex-shrink-0 mt-1">
                        <i data-lucide="shield-check" class="w-10 h-10 accent-color"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-50">Autodesk Certified Professional</h3>
                        <p class="text-sm text-gray-400">AutoCAD</p>
                    </div>
                </div>
                 <div class="glass-effect rounded-lg p-6 flex items-start gap-4">
                    <div class="flex-shrink-0 mt-1">
                        <i data-lucide="shield-check" class="w-10 h-10 accent-color"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-50">Fusion 360 Certified User</h3>
                        <p class="text-sm text-gray-400">Autodesk Inc.</p>
                    </div>
                </div>
                 <div class="glass-effect rounded-lg p-6 flex items-start gap-4">
                    <div class="flex-shrink-0 mt-1">
                        <i data-lucide="shield-check" class="w-10 h-10 accent-color"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-50">Scissor/Aerial Lift Certified</h3>
                        <p class="text-sm text-gray-400">UCF Environmental Health & Safety</p>
                    </div>
                </div>
                 <div class="glass-effect rounded-lg p-6 flex items-start gap-4">
                    <div class="flex-shrink-0 mt-1">
                        <i data-lucide="shield-check" class="w-10 h-10 accent-color"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-gray-50">Ladder & Fall Protection</h3>
                        <p class="text-sm text-gray-400">UCF Environmental Health & Safety</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Resume Section -->
        <section id="resume" class="py-24 scroll-animation">
            <h2 class="section-heading">Resume</h2>
            <div class="max-w-4xl mx-auto text-center">
                <div class="glass-effect rounded-lg p-4 mb-8 inline-block">
                     <img src="https://raw.githubusercontent.com/CalebS48/caleb-smith-website/main/assets/Caleb_Smith_Resume-1.png" alt="Caleb Smith's Resume" class="rounded-md shadow-lg w-full">
                </div>
                <br>
                <a href="https://raw.githubusercontent.com/CalebS48/caleb-smith-website/main/assets/Caleb%20Smith%20Resume.docx.pdf" download class="accent-bg text-white font-bold py-3 px-10 rounded-md hover:bg-opacity-90 transition-all duration-300 text-lg inline-flex items-center gap-2">
                    <i data-lucide="download" class="w-5 h-5"></i>
                    Download PDF
                </a>
            </div>
        </section>

        <!-- "In The Works" Section -->
        <section id="in-the-works" class="py-24 scroll-animation">
            <h2 class="section-heading">What I'm Working On</h2>
            <div class="glass-effect rounded-lg p-8 flex flex-col md:flex-row items-center gap-8">
                <div class="flex-shrink-0">
                    <i data-lucide="flask-conical" class="w-24 h-24 text-blue-400"></i>
                </div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-50 mb-2">AI-Powered Material Simulation</h3>
                    <p class="text-gray-400">
                        Currently developing a Python-based simulation tool that uses machine learning to predict the performance of novel composite materials under stress. This project aims to accelerate the R&D cycle for creating stronger, lighter, and more sustainable materials for aerospace and automotive applications.
                    </p>
                </div>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="py-24 text-center scroll-animation">
            <h2 class="text-2xl font-semibold accent-color mb-2">What's Next?</h2>
            <h3 class="text-4xl md:text-5xl font-bold text-gray-50 mb-4">Get In Touch</h3>
            <p class="max-w-xl mx-auto text-gray-400 mb-8">
                I'm currently seeking new opportunities and am open to discussing exciting projects or potential roles. Feel free to send me a message!
            </p>
            <form id="contact-form" class="max-w-xl mx-auto">
                <div id="form-feedback" class="mb-4 text-lg accent-color font-semibold"></div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <input type="text" name="name" placeholder="Your Name" required class="w-full bg-gray-700 border border-gray-600 rounded-md py-3 px-4 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <input type="email" name="email" placeholder="Your Email" required class="w-full bg-gray-700 border border-gray-600 rounded-md py-3 px-4 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <textarea name="message" placeholder="Your Message" rows="5" required class="w-full bg-gray-700 border border-gray-600 rounded-md py-3 px-4 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4"></textarea>
                <button type="submit" class="accent-bg text-white font-bold py-3 px-10 rounded-md hover:bg-opacity-90 transition-all duration-300 text-lg">
                    Send Message
                </button>
            </form>
        </section>

    </main>

    <!-- Footer -->
    <footer class="py-8 text-center text-gray-500">
         <div class="flex flex-col items-center justify-center space-y-2 mb-4">
            <a href="mailto:48calebsmith@gmail.com" class="hover:accent-color transition-colors">48calebsmith@gmail.com</a>
            <a href="tel:813-520-6992" class="hover:accent-color transition-colors">(813)-520-6992</a>
        </div>
        <div class="flex justify-center space-x-6 mb-4">
            <a href="#" class="hover:accent-color transition-colors"><i data-lucide="github" class="w-6 h-6"></i></a>
            <a href="#" class="hover:accent-color transition-colors"><i data-lucide="linkedin" class="w-6 h-6"></i></a>
            <a href="#" class="hover:accent-color transition-colors"><i data-lucide="twitter" class="w-6 h-6"></i></a>
        </div>
        <p>Designed & Built by Caleb Smith</p>
    </footer>

    <!-- Project Modal -->
    <div id="project-modal" class="modal-overlay hidden">
        <div class="modal-content w-11/12 max-w-4xl max-h-[90vh] bg-gray-800 rounded-lg shadow-xl overflow-y-auto p-8 relative">
            <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10">
                <i data-lucide="x" class="w-8 h-8"></i>
            </button>
            <h2 id="modal-title" class="text-3xl font-bold text-white mb-4">Project Title</h2>
            <div id="modal-media-container" class="w-full h-64 md:h-96 bg-gray-900 rounded-lg mb-6">
                <!-- Image or 3D viewer will be inserted here by JS -->
            </div>
            <div class="text-gray-300 space-y-6">
                <div>
                    <h3 class="text-xl font-semibold text-gray-100 border-b border-gray-600 pb-2 mb-2">Description</h3>
                    <p id="modal-description"></p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-100 border-b border-gray-600 pb-2 mb-2">Challenges</h3>
                    <p id="modal-challenges"></p>
                </div>
                 <div>
                    <h3 class="text-xl font-semibold text-gray-100 border-b border-gray-600 pb-2 mb-2">Results</h3>
                    <p id="modal-results"></p>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module">
        import { OrbitControls } from 'https://cdn.skypack.dev/three@0.128.0/examples/jsm/controls/OrbitControls.js';
        import { OBJLoader } from 'https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/OBJLoader.js';
        import { MTLLoader } from 'https://cdn.skypack.dev/three@0.128.0/examples/jsm/loaders/MTLLoader.js';

        lucide.createIcons();

        // Mobile Menu Toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => { if(link.closest('#mobile-menu')) { mobileMenu.classList.add('hidden'); } });
        });

        // Header scroll effect
        const header = document.getElementById('header');
        let lastScrollY = window.scrollY;
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                header.classList.add('py-2');
                header.classList.remove('py-4');
                if (lastScrollY < window.scrollY && !mobileMenu.classList.contains('hidden')) { } 
                else if (lastScrollY < window.scrollY) { header.style.transform = 'translateY(-100%)'; } 
                else { header.style.transform = 'translateY(0)'; }
            } else {
                header.classList.remove('py-2');
                header.classList.add('py-4');
                header.style.transform = 'translateY(0)';
            }
            lastScrollY = window.scrollY;
        });

        // Scroll animations
        const animatedElements = document.querySelectorAll('.scroll-animation');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); } });
        }, { threshold: 0.1 });
        animatedElements.forEach(el => observer.observe(el));
        
        // Contact Form Logic
        const contactForm = document.getElementById('contact-form');
        const formFeedback = document.getElementById('form-feedback');
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            formFeedback.textContent = "Thank you! Your message has been sent.";
            contactForm.reset();
            setTimeout(() => formFeedback.textContent = "", 4000);
        });

        // ---- Project Modal Logic ----
        const projectDetails = {
            'orange-race': {
                title: "Great Navel Orange Race",
                mediaType: '3d-boat',
                description: "This was an extracurricular project at UCF to design and build a remote-controlled boat. My primary role involved designing the hull in SolidWorks and running fluid analysis simulations to ensure positive buoyancy and stability, even in rough water conditions.",
                challenges: "The main challenge was integrating a functional gyroscope for stabilization within the tight constraints of the hull design. Ensuring the electronics were properly waterproofed while allowing for RC signal reception was also a critical hurdle.",
                results: "Our team was the first out of 275 to successfully implement a functional gyroscope during the RC testing phase of the project. This innovation contributed to our boat's excellent stability and performance, helping us place within the top 10 of all competitors."
            },
            'robotic-hand': {
                title: "Robotic Hand Competition",
                mediaType: '3d-hand',
                objUrl: 'https://raw.githubusercontent.com/CalebS48/caleb-smith-website/main/assets/robotic-hand.obj',
                mtlUrl: 'https://raw.githubusercontent.com/CalebS48/caleb-smith-website/main/assets/robotic-hand.mtl',
                description: "For an ASME competition, I engineered a fully operational robotic hand using SolidWorks for design and 3D printing for manufacturing. The project focused on replicating the complex functions of a human hand through mechanical and electrical systems.",
                challenges: "A key challenge was creating a control system that was both intuitive and precise. We used a system of potentiometers to act as 'tendons,' controlled by fishing line and rubber bands. Calibrating the tension and sensor sensitivity to achieve a firm but controlled grip was a complex process of trial and error.",
                results: "The final product demonstrated proficiency in mechatronics, successfully integrating mechanical parts with electrical components to achieve successful object manipulation. The hand was able to pick up and manipulate a variety of objects, showcasing the effectiveness of the design."
            }
        };

        const projectModal = document.getElementById('project-modal');
        const modalCloseBtn = document.getElementById('modal-close-btn');
        const projectCards = document.querySelectorAll('.project-card');
        const mediaContainer = document.getElementById('modal-media-container');

        let threejs_scene, threejs_camera, threejs_renderer, threejs_controls, threejs_animationFrameId;
        let cleanupThreeJSResize = null;

        // Generic 3D scene cleanup
        function destroyThreeJS() {
             if (threejs_animationFrameId) cancelAnimationFrame(threejs_animationFrameId);
             if (threejs_renderer) threejs_renderer.dispose();
             if (typeof cleanupThreeJSResize === 'function') {
                cleanupThreeJSResize();
                cleanupThreeJSResize = null;
            }
             threejs_scene = null;
             threejs_camera = null;
             threejs_renderer = null;
             threejs_controls = null;
             threejs_animationFrameId = null;
        }

        // --- 3D Scene Initializers ---
        function setupCommon3DScene(container) {
            threejs_scene = new THREE.Scene();
            threejs_camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            threejs_renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            
            threejs_renderer.setSize(container.clientWidth, container.clientHeight);
            threejs_renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(threejs_renderer.domElement);

            threejs_controls = new OrbitControls(threejs_camera, threejs_renderer.domElement);
            threejs_controls.enableDamping = true;
            threejs_controls.autoRotate = true;

            const ambientLight = new THREE.AmbientLight(0xffffff, 0.7);
            threejs_scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
            directionalLight.position.set(5, 10, 7.5);
            threejs_scene.add(directionalLight);

            threejs_camera.position.z = 3.5;

            function animate() {
                threejs_animationFrameId = requestAnimationFrame(animate);
                threejs_controls.update();
                threejs_renderer.render(threejs_scene, threejs_camera);
            }
            animate();

            const onResize = () => {
                threejs_camera.aspect = container.clientWidth / container.clientHeight;
                threejs_camera.updateProjectionMatrix();
                threejs_renderer.setSize(container.clientWidth, container.clientHeight);
            };
            window.addEventListener('resize', onResize);
            cleanupThreeJSResize = () => window.removeEventListener('resize', onResize);
        }

        function initBoatScene(container) {
            setupCommon3DScene(container);
            threejs_controls.autoRotateSpeed = 1.0;

            const material = new THREE.MeshStandardMaterial({ color: 0x60a5fa, metalness: 0.3, roughness: 0.6 });
            const hullShape = new THREE.Shape();
            hullShape.moveTo(0, 0);
            hullShape.lineTo(0, 0.8);
            hullShape.lineTo(1, 1);
            hullShape.lineTo(3, 1);
            hullShape.lineTo(4, 0.8);
            hullShape.lineTo(4, 0);
            hullShape.lineTo(0, 0);

            const extrudeSettings = { steps: 2, depth: 1.6, bevelEnabled: true, bevelThickness: 0.1, bevelSize: 0.1, bevelOffset: 0, bevelSegments: 1 };
            const geometry = new THREE.ExtrudeGeometry(hullShape, extrudeSettings);
            geometry.center();
            
            const hull = new THREE.Mesh(geometry, material);
            hull.rotation.x = -Math.PI / 12;
            threejs_scene.add(hull);
        }

        function initHandScene(container, objUrl, mtlUrl) {
            setupCommon3DScene(container);
            threejs_controls.autoRotateSpeed = 0.8;
            
            const mtlLoader = new MTLLoader();
            mtlLoader.load(mtlUrl, (materials) => {
                materials.preload();
                const objLoader = new OBJLoader();
                objLoader.setMaterials(materials);
                objLoader.load(objUrl, (object) => {
                    const box = new THREE.Box3().setFromObject(object);
                    const size = box.getSize(new THREE.Vector3()).length();
                    const center = box.getCenter(new THREE.Vector3());
                    
                    object.position.x += (object.position.x - center.x);
                    object.position.y += (object.position.y - center.y);
                    object.position.z += (object.position.z - center.z);
                    
                    threejs_controls.maxDistance = size * 10;
                    threejs_camera.near = size / 100;
                    threejs_camera.far = size * 100;
                    threejs_camera.updateProjectionMatrix();
                    
                    threejs_camera.position.copy(center);
                    threejs_camera.position.x += size / 2.0;
                    threejs_camera.position.y += size / 5.0;
                    threejs_camera.position.z += size / 2.0;
                    threejs_camera.lookAt(center);

                    threejs_scene.add(object);
                },
                (xhr) => { console.log((xhr.loaded / xhr.total * 100) + '% loaded'); },
                (error) => { console.error('An error happened while loading the OBJ model:', error); }
                );
            },
            (xhr) => { console.log((xhr.loaded / xhr.total * 100) + '% loaded'); },
            (error) => { console.error('An error happened while loading the MTL file:', error); }
            );
        }
        
        // --- Modal Opening/Closing ---
        function openModal(projectId) {
            const details = projectDetails[projectId];
            if (!details) return;

            document.getElementById('modal-title').textContent = details.title;
            document.getElementById('modal-description').textContent = details.description;
            document.getElementById('modal-challenges').textContent = details.challenges;
            document.getElementById('modal-results').textContent = details.results;
            
            mediaContainer.innerHTML = ''; 

            const prompt = document.createElement('div');
            prompt.className = 'three-d-prompt';
            prompt.textContent = 'Click and drag to explore the model';

            if (details.mediaType === '3d-boat') {
                initBoatScene(mediaContainer);
                mediaContainer.appendChild(prompt);
            } else if (details.mediaType === '3d-hand') {
                initHandScene(mediaContainer, details.objUrl, details.mtlUrl);
                mediaContainer.appendChild(prompt);
            } else if (details.mediaType === 'image') {
                const img = document.createElement('img');
                img.src = details.mediaUrl;
                img.alt = details.title;
                img.className = 'w-full h-full object-cover rounded-lg';
                mediaContainer.appendChild(img);
            }

            projectModal.classList.remove('hidden');
            setTimeout(() => projectModal.classList.add('visible'), 10); 
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            projectModal.classList.remove('visible');
            destroyThreeJS(); 
            setTimeout(() => {
                projectModal.classList.add('hidden');
                document.body.style.overflow = 'auto';
            }, 300);
        }

        projectCards.forEach(card => card.addEventListener('click', () => openModal(card.dataset.projectId)));
        modalCloseBtn.addEventListener('click', closeModal);
        projectModal.addEventListener('click', (e) => { if (e.target === projectModal) closeModal(); });

        // ---- Hero Canvas Animation ----
        const canvas = document.getElementById('hero-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let mouse = { x: null, y: null, radius: 150 };

        function setCanvasSize() {
            const heroSection = document.getElementById('hero');
            canvas.width = heroSection.offsetWidth;
            canvas.height = heroSection.offsetHeight;
        }

        window.addEventListener('resize', () => { setCanvasSize(); initParticles(); });
        window.addEventListener('mousemove', (event) => {
            const rect = canvas.getBoundingClientRect();
            mouse.x = event.clientX - rect.left;
            mouse.y = event.clientY - rect.top;
        });
        window.addEventListener('mouseout', () => { mouse.x = null; mouse.y = null; });

        class Particle {
            constructor(x, y, dX, dY, size, color) { this.x = x; this.y = y; this.directionX = dX; this.directionY = dY; this.size = size; this.color = color; }
            draw() { ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = this.color; ctx.fill(); }
            update() {
                if (this.x > canvas.width || this.x < 0) this.directionX = -this.directionX;
                if (this.y > canvas.height || this.y < 0) this.directionY = -this.directionY;
                let dx = mouse.x - this.x; let dy = mouse.y - this.y; let distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < mouse.radius + this.size) {
                    if (mouse.x < this.x && this.x < canvas.width - this.size * 10) this.x += 5;
                    if (mouse.x > this.x && this.x > this.size * 10) this.x -= 5;
                    if (mouse.y < this.y && this.y < canvas.height - this.size * 10) this.y += 5;
                    if (mouse.y > this.y && this.y > this.size * 10) this.y -= 5;
                }
                this.x += this.directionX; this.y += this.directionY; this.draw();
            }
        }

        function initParticles() {
            particles = [];
            let num = (canvas.height * canvas.width) / 9000;
            for (let i = 0; i < num; i++) {
                let size = (Math.random() * 2) + 1;
                let x = (Math.random() * ((canvas.width - size * 2) - (size * 2)) + size * 2);
                let y = (Math.random() * ((canvas.height - size * 2) - (size * 2)) + size * 2);
                let dX = (Math.random() * .4) - .2; let dY = (Math.random() * .4) - .2;
                particles.push(new Particle(x, y, dX, dY, size, 'rgba(96, 165, 250, 0.5)'));
            }
        }

        function connect() {
            let opacityValue = 1;
            for (let a = 0; a < particles.length; a++) {
                for (let b = a; b < particles.length; b++) {
                    let distance = ((particles[a].x - particles[b].x) * (particles[a].x - particles[b].x)) + ((particles[a].y - particles[b].y) * (particles[a].y - particles[b].y));
                    if (distance < (canvas.width / 7) * (canvas.height / 7)) {
                        opacityValue = 1 - (distance / 20000);
                        ctx.strokeStyle = `rgba(96, 165, 250, ${opacityValue})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath(); ctx.moveTo(particles[a].x, particles[a].y); ctx.lineTo(particles[b].x, particles[b].y); ctx.stroke();
                    }
                }
            }
        }
        
        function animateParticles() {
            requestAnimationFrame(animateParticles);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particles.length; i++) { particles[i].update(); }
            connect();
        }

        setTimeout(() => { setCanvasSize(); initParticles(); animateParticles(); }, 100);

    </script>
</body>
</html>

